#N canvas 270 157 1081 486 12;
#X declare -path ./input_files/;
#X declare -path ./;
#N canvas 72 145 1240 549 audio_record 1;
#X obj 371 222 metro 100;
#X obj 371 166 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#N canvas 0 50 450 250 (subpatch) 0;
#X array array1 441000 float 2;
#X coords 0 1 441000 -1 200 140 1;
#X restore 441 24 graph;
#X obj 498 287 tabwrite~ array1;
#X obj 736 690 writesf~;
#X msg 773 604 stop;
#X obj 267 294 vu 15 120 empty empty -1 -8 0 10 -66577 -1 1 0;
#X obj 217 240 - 100;
#X text 33 268 threshold to begin record+analyze;
#X floatatom 104 191 5 0 0 0 - - -;
#X floatatom 171 340 5 0 0 0 - - -;
#X msg 770 541 start;
#X obj 37 346 value prev_state;
#X floatatom 9 394 5 0 0 0 - - -;
#X obj 108 399 expr prev_state!=$f1;
#X floatatom 109 446 5 0 0 0 - - -;
#X obj 106 484 sel 1;
#X obj 104 526 expr prev_state==0;
#X obj 121 572 sel 0 1;
#X msg 441 743 \; prev_state 1;
#X msg 40 727 \; prev_state 0;
#X obj 603 496 f;
#X obj 661 492 + 1;
#X floatatom 603 529 5 0 0 0 - - -;
#X floatatom 591 619 5 0 0 0 - - -;
#X obj 187 899 sel 1;
#N canvas 331 397 448 371 my_timer 0;
#X obj 114 104 metro 1000;
#X obj 10 149 + 1, f 5;
#X floatatom 103 191 5 0 0 0 - - -;
#X obj 118 30 inlet;
#X obj 100 149 value my_timer_tm;
#X obj 99 260 outlet;
#X obj 294 25 inlet;
#X msg 210 65 stop;
#X msg 305 85 \; my_timer_tm 0;
#X text 85 6 start timer;
#X text 267 0 stop and reset;
#X text 76 226 output in seconds;
#X connect 0 0 4 0;
#X connect 1 0 4 0;
#X connect 2 0 5 0;
#X connect 3 0 0 0;
#X connect 4 0 1 0;
#X connect 4 0 2 0;
#X connect 6 0 7 0;
#X connect 6 0 8 0;
#X connect 6 0 4 0;
#X connect 7 0 0 0;
#X restore 182 763 pd my_timer;
#X obj 180 711 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 335 748 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X floatatom 185 795 5 0 0 0 - - -;
#X text 271 710 stop and reset;
#X text 166 690 start;
#X obj 310 792 inlet;
#X obj 185 836 expr $f1==$f2+1;
#X floatatom 310 823 5 0 0 0 - - -;
#X obj 814 652 f;
#X obj 777 646 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 684 969 outlet;
#X text 559 938 outputs newly recorded wav number;
#X obj 887 542 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 823 574 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 899 611 spigot 0;
#X obj 985 668 f;
#X obj 1043 664 + 1;
#X floatatom 983 701 5 0 0 0 - - -;
#X obj 920 640 t b;
#X obj 968 737 expr if($f1==1 \, 1 \, 0);
#X obj 914 766 spigot 0;
#X obj 910 808 f;
#X floatatom 958 809 5 0 0 0 - - -;
#X obj 925 857 -;
#X obj 1028 900 abs;
#X msg 837 618 0;
#X obj 983 836 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 922 931 +;
#X floatatom 974 930 5 0 0 0 - - -;
#X obj 866 928 f;
#X floatatom 868 978 5 0 0 0 - - -;
#X obj 954 1038 outlet;
#X obj 934 995 /;
#X obj 1021 825 - 1;
#X obj 995 1003 f;
#X floatatom 1066 982 5 0 0 0 - - -;
#N canvas 72 96 1294 672 thres_and_av_amp 1;
#X obj 94 208 int;
#X obj 164 209 +;
#X floatatom 94 242 5 0 0 0 - - -;
#X obj 77 152 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X msg 121 164 0;
#X text 109 42 this will be the env~;
#X text 120 142 this is the counter;
#X obj 66 108 moses;
#X obj 377 161 int;
#X floatatom 377 189 5 0 0 0 - - -;
#X obj 439 162 +;
#X msg 392 124 0;
#X floatatom 454 110 5 0 0 0 - - -;
#X text 434 188 sum of envelopes;
#X text 134 246 number of sumples;
#X obj 369 307 expr $f1 / $f2;
#X floatatom 369 343 5 0 0 0 - - -;
#X text 411 342 average envelope;
#X obj 98 352 expr ($f1 - $f2)*($f1 - $f2);
#X floatatom 52 369 5 0 0 0 - - -;
#X obj 138 451 int;
#X floatatom 138 479 5 0 0 0 - - -;
#X obj 200 452 +;
#X floatatom 215 400 5 0 0 0 - - -;
#X obj 102 389 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 55 258 0;
#X text 177 479 sum of (average - current_env)^2;
#X floatatom 561 524 5 0 0 0 - - -;
#X floatatom 407 592 5 0 0 0 - - -;
#X obj 504 555 expr sqrt($f1);
#X text 215 163 set to 1;
#X obj 69 3 inlet;
#X obj 89 612 outlet;
#X obj 668 606 outlet;
#X floatatom 141 20 5 0 0 0 - - -;
#X obj 578 496 expr $f1 / ($f2 - 1);
#X floatatom 217 537 5 0 0 0 - - -;
#X obj 194 183 r thresh_counter;
#X text 238 70 set to 58;
#X obj 192 580 expr if($f1 < $f2 \, $f2 \, $f1 );
#X obj 392 525 r defeult_threshold;
#X floatatom 409 553 5 0 0 0 - - -;
#X floatatom 126 92 5 0 0 0 - - -;
#X obj 126 66 r thresh_moses;
#X obj 278 526 expr $f1 + $f2;
#X connect 0 0 1 0;
#X connect 0 0 2 0;
#X connect 1 0 0 1;
#X connect 2 0 15 1;
#X connect 2 0 35 1;
#X connect 3 0 0 0;
#X connect 3 0 8 0;
#X connect 4 0 0 1;
#X connect 7 0 4 0;
#X connect 7 0 11 0;
#X connect 7 0 25 0;
#X connect 7 1 3 0;
#X connect 7 1 18 1;
#X connect 8 0 9 0;
#X connect 8 0 10 0;
#X connect 9 0 15 0;
#X connect 10 0 8 1;
#X connect 11 0 8 1;
#X connect 12 0 10 1;
#X connect 15 0 16 0;
#X connect 16 0 18 0;
#X connect 16 0 33 0;
#X connect 16 0 44 0;
#X connect 18 0 19 0;
#X connect 18 0 23 0;
#X connect 18 0 24 0;
#X connect 20 0 21 0;
#X connect 20 0 22 0;
#X connect 21 0 35 0;
#X connect 22 0 20 1;
#X connect 23 0 22 1;
#X connect 24 0 20 0;
#X connect 25 0 20 1;
#X connect 27 0 29 0;
#X connect 28 0 44 1;
#X connect 29 0 28 0;
#X connect 31 0 34 0;
#X connect 34 0 12 0;
#X connect 34 0 7 0;
#X connect 35 0 27 0;
#X connect 37 0 1 1;
#X connect 39 0 32 0;
#X connect 39 0 32 0;
#X connect 40 0 39 1;
#X connect 40 0 41 0;
#X connect 42 0 7 1;
#X connect 43 0 42 0;
#X connect 44 0 36 0;
#X connect 44 0 39 0;
#X connect 44 0 39 0;
#X restore 320 367 pd thres_and_av_amp;
#X floatatom 478 384 5 0 0 0 - - -;
#X obj 142 299 expr $f1>$f2+0.5;
#X floatatom 340 412 5 0 0 0 - - -;
#X text 359 793 wav_size (seconds);
#X obj 825 238 soundfiler;
#X floatatom 861 263 12 0 0 0 - - -;
#X floatatom 840 339 5 0 0 0 - - -;
#X obj 1145 365 dac~;
#X obj 1078 275 vsl 32 64 0 1 0 0 empty empty empty 0 -9 0 10 -262144
-1 -1 0 1;
#X obj 993 344 *~;
#X obj 813 305 expr $f1/44100;
#X obj 780 151 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 980 120 trigger b b;
#X obj 861 286 s sampleSize;
#X obj 310 441 spigot;
#X obj 410 452 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 441 475 r defeult_threshold;
#X floatatom 361 491 5 0 0 0 - - -;
#X obj 858 413 tabplay~ array1;
#X msg 900 349 bang;
#X obj 406 418 inlet;
#X obj 149 59 adc~;
#X obj 1042 248 print;
#X obj 864 101 inlet;
#X obj 856 151 print list;
#X floatatom 212 482 5 0 0 0 - - -;
#X obj 992 559 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 938 504 change;
#X floatatom 1020 488 5 0 0 0 - - -;
#X floatatom 1014 425 5 0 0 0 - - -;
#X floatatom 884 509 5 0 0 0 - - -;
#X obj 938 469 expr if(\$1 == 0 \, 1 \, 0);
#X obj 605 838 outlet;
#X obj 450 414 outlet;
#X text 501 414 average amplitude;
#X obj 149 129 env~;
#X obj 245 120 env~;
#X obj 342 69 inlet;
#X obj 342 134 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X floatatom 208 141 5 0 0 0 - - -;
#X floatatom 102 149 5 0 0 0 - - -;
#X obj 149 171 expr if ($f3 == 0 \, $f2 \, $f1);
#X msg 588 672 open ./extracted/wav\$1.wav;
#X obj 677 559 inlet;
#X obj 603 577 mod \$2;
#X obj 413 322 spigot 0, f 10;
#X floatatom 332 329 5 0 0 0 - - -;
#X msg 815 204 read -resize \$1 array1;
#X obj 691 15 declare -path ./input_files/;
#X floatatom 270 481 5 0 0 0 - - -;
#X obj 255 540 expr if($f3 == 0 \, $f2 \, $f1);
#X msg 558 347 0;
#X msg 314 492 bang;
#X connect 0 0 3 0;
#X connect 1 0 0 0;
#X connect 5 0 4 0;
#X connect 5 0 36 0;
#X connect 5 0 40 0;
#X connect 7 0 6 0;
#X connect 10 0 14 0;
#X connect 11 0 4 0;
#X connect 11 0 40 0;
#X connect 12 0 13 0;
#X connect 14 0 15 0;
#X connect 15 0 16 0;
#X connect 16 0 17 0;
#X connect 17 0 18 0;
#X connect 18 0 5 0;
#X connect 18 0 28 0;
#X connect 18 0 20 0;
#X connect 18 0 12 0;
#X connect 18 1 21 0;
#X connect 18 1 11 0;
#X connect 18 1 27 0;
#X connect 18 1 19 0;
#X connect 18 1 12 0;
#X connect 21 0 22 0;
#X connect 21 0 23 0;
#X connect 22 0 21 1;
#X connect 23 0 108 0;
#X connect 24 0 35 1;
#X connect 24 0 106 0;
#X connect 25 0 5 0;
#X connect 25 0 28 0;
#X connect 25 0 20 0;
#X connect 25 0 12 0;
#X connect 26 0 29 0;
#X connect 27 0 26 0;
#X connect 28 0 26 1;
#X connect 29 0 33 0;
#X connect 32 0 34 0;
#X connect 33 0 25 0;
#X connect 34 0 33 1;
#X connect 35 0 37 0;
#X connect 36 0 35 0;
#X connect 36 0 52 0;
#X connect 36 0 61 0;
#X connect 36 0 96 0;
#X connect 39 0 41 1;
#X connect 40 0 39 0;
#X connect 41 0 45 0;
#X connect 41 0 47 0;
#X connect 41 0 49 0;
#X connect 42 0 43 0;
#X connect 42 0 44 0;
#X connect 43 0 42 1;
#X connect 44 0 46 0;
#X connect 44 0 60 0;
#X connect 45 0 42 0;
#X connect 45 0 56 0;
#X connect 46 0 47 1;
#X connect 47 0 48 0;
#X connect 48 0 50 1;
#X connect 49 0 48 1;
#X connect 49 0 50 0;
#X connect 49 0 53 0;
#X connect 50 0 51 0;
#X connect 51 0 55 0;
#X connect 52 0 42 0;
#X connect 52 0 56 1;
#X connect 53 0 48 0;
#X connect 54 0 56 1;
#X connect 55 0 54 1;
#X connect 56 0 54 0;
#X connect 56 0 57 0;
#X connect 57 0 59 0;
#X connect 59 0 61 1;
#X connect 60 0 59 1;
#X connect 61 0 58 0;
#X connect 61 0 62 0;
#X connect 63 0 66 0;
#X connect 63 1 64 0;
#X connect 63 1 97 0;
#X connect 65 0 10 0;
#X connect 66 0 78 0;
#X connect 68 0 69 0;
#X connect 68 0 74 0;
#X connect 69 0 77 0;
#X connect 72 0 73 1;
#X connect 73 0 71 0;
#X connect 73 0 71 1;
#X connect 74 0 70 0;
#X connect 75 0 1 0;
#X connect 76 0 83 0;
#X connect 78 0 113 0;
#X connect 78 0 114 0;
#X connect 79 0 78 1;
#X connect 79 0 109 1;
#X connect 79 0 114 2;
#X connect 79 0 115 0;
#X connect 80 0 81 0;
#X connect 81 0 114 1;
#X connect 81 0 116 0;
#X connect 82 0 73 0;
#X connect 82 0 4 0;
#X connect 82 0 3 0;
#X connect 82 0 100 0;
#X connect 82 1 93 0;
#X connect 83 0 82 0;
#X connect 84 0 79 0;
#X connect 85 0 99 0;
#X connect 85 0 4 0;
#X connect 85 1 99 0;
#X connect 85 1 4 0;
#X connect 87 0 111 0;
#X connect 87 0 76 0;
#X connect 87 0 75 0;
#X connect 87 0 88 0;
#X connect 91 0 90 0;
#X connect 92 0 91 0;
#X connect 95 0 91 0;
#X connect 95 0 94 0;
#X connect 99 0 104 0;
#X connect 99 0 105 0;
#X connect 99 0 109 0;
#X connect 100 0 103 0;
#X connect 100 0 105 1;
#X connect 101 0 102 0;
#X connect 102 0 105 2;
#X connect 105 0 9 0;
#X connect 105 0 65 0;
#X connect 105 0 41 0;
#X connect 105 0 95 0;
#X connect 105 0 7 0;
#X connect 106 0 4 0;
#X connect 107 0 108 1;
#X connect 108 0 24 0;
#X connect 109 0 63 0;
#X connect 109 0 110 0;
#X connect 111 0 68 0;
#X connect 111 0 86 0;
#X connect 114 0 65 1;
#X connect 114 0 89 0;
#X connect 115 0 63 0;
#X connect 116 0 114 0;
#X restore 127 406 pd audio_record;
#X text 420 276 capture samples above this db;
#N canvas 273 96 972 672 audio_analyze 1;
#N canvas 0 50 450 250 (subpatch) 0;
#X array array2 6144 float 2;
#X coords 0 1 6144 -1 200 140 1 0 0;
#X restore 703 50 graph;
#X obj 314 36 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 48 122 soundfiler;
#X floatatom 88 154 12 0 0 0 - - -;
#X floatatom 63 222 5 0 0 0 - - -;
#X obj 5 409 dac~;
#X obj 15 271 vsl 32 64 0 1 0 0 empty empty empty 0 -9 0 10 -262144
-1 -1 0 1;
#X obj 22 348 *~;
#X floatatom 393 445 5 0 0 0 - - -;
#X obj 308 234 timer;
#X floatatom 283 283 8 0 0 0 - - -;
#X obj 370 238 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 435 415 change;
#N canvas 67 96 643 608 find_decay 0;
#X floatatom 415 124 8 0 0 0 - - -;
#X obj 368 32 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#N canvas 434 118 450 300 my_timer_milli 0;
#X obj 10 149 + 1, f 5;
#X floatatom 103 191 12 0 0 0 - - -;
#X obj 118 30 inlet;
#X obj 100 149 value my_timer_tm;
#X obj 99 260 outlet;
#X obj 294 25 inlet;
#X msg 210 65 stop;
#X msg 305 85 \; my_timer_tm 0;
#X text 85 6 start timer;
#X text 267 0 stop and reset;
#X text 76 226 output in seconds;
#X obj 114 104 metro 1;
#X connect 0 0 3 0;
#X connect 1 0 4 0;
#X connect 2 0 7 0;
#X connect 2 0 11 0;
#X connect 3 0 0 0;
#X connect 3 0 1 0;
#X connect 5 0 6 0;
#X connect 5 0 7 0;
#X connect 6 0 11 0;
#X connect 11 0 3 0;
#X restore 427 88 pd my_timer_milli;
#X obj 487 31 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 321 2 inlet;
#X obj 414 155 outlet;
#X obj 57 24 inlet;
#X floatatom 68 70 5 0 0 0 - - -;
#X obj 317 234 v decay_prev_value;
#X floatatom 312 273 5 0 0 0 - - -;
#X text 291 217 this is for initing the prev value with attack max
value;
#X text 435 230 after this env~ values will pass;
#X obj 43 276 sel 0;
#X obj 96 337 s decay_prev_value;
#X obj 103 308 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X floatatom 100 269 5 0 0 0 - - -;
#X obj 84 138 spigot 0;
#X msg 159 81 1;
#X msg 232 110 0;
#X floatatom 86 163 5 0 0 0 - - -;
#X floatatom 200 155 5 0 0 0 - - -;
#X obj 316 36 f;
#X obj 310 67 expr if($f1==0 \, 1 \, 0);
#X obj 310 93 sel 1;
#X obj 128 192 s sustain_prev_value;
#X obj 230 9 inlet;
#X floatatom 234 49 5 0 0 0 - - -;
#X obj 459 352 outlet;
#X obj 44 309 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X text 438 331 outputs bang when stops;
#X obj 18 232 expr if($f1+$f3<=$f2 \, $f1 \, 0) \;;
#X connect 0 0 5 0;
#X connect 1 0 2 0;
#X connect 1 0 8 0;
#X connect 2 0 0 0;
#X connect 3 0 2 1;
#X connect 4 0 1 0;
#X connect 4 0 21 0;
#X connect 6 0 7 0;
#X connect 7 0 16 0;
#X connect 8 0 9 0;
#X connect 9 0 30 1;
#X connect 12 0 3 0;
#X connect 12 0 18 0;
#X connect 12 0 28 0;
#X connect 12 1 13 0;
#X connect 12 1 14 0;
#X connect 14 0 8 0;
#X connect 16 0 19 0;
#X connect 16 0 30 0;
#X connect 17 0 16 1;
#X connect 17 0 20 0;
#X connect 18 0 16 1;
#X connect 18 0 20 0;
#X connect 19 0 24 0;
#X connect 20 0 21 1;
#X connect 21 0 22 0;
#X connect 22 0 23 0;
#X connect 23 0 17 0;
#X connect 25 0 26 0;
#X connect 26 0 30 2;
#X connect 28 0 27 0;
#X connect 30 0 12 0;
#X connect 30 0 15 0;
#X restore 264 502 pd find_decay;
#X obj 382 493 s decay_prev_value;
#X obj 138 360 env~;
#X floatatom 356 534 5 0 0 0 - - -;
#X obj 470 445 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 212 394 expr if($f1 >= $f2 \, $f1 \, $f2) \;;
#N canvas 335 246 698 410 find_sustain 0;
#X floatatom 415 124 8 0 0 0 - - -;
#X obj 372 40 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#N canvas 434 118 450 300 my_timer_milli 0;
#X obj 10 149 + 1, f 5;
#X floatatom 103 191 12 0 0 0 - - -;
#X obj 118 30 inlet;
#X obj 100 149 value my_timer_tm;
#X obj 99 260 outlet;
#X obj 294 25 inlet;
#X msg 210 65 stop;
#X msg 305 85 \; my_timer_tm 0;
#X text 85 6 start timer;
#X text 267 0 stop and reset;
#X text 76 226 output in seconds;
#X obj 114 104 metro 1;
#X connect 0 0 3 0;
#X connect 1 0 4 0;
#X connect 2 0 7 0;
#X connect 2 0 11 0;
#X connect 3 0 0 0;
#X connect 3 0 1 0;
#X connect 5 0 6 0;
#X connect 5 0 7 0;
#X connect 6 0 11 0;
#X connect 11 0 3 0;
#X restore 427 88 pd my_timer_milli;
#X obj 487 31 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 321 2 inlet;
#X obj 414 155 outlet;
#X obj 57 24 inlet;
#X floatatom 59 72 5 0 0 0 - - -;
#X floatatom 348 284 5 0 0 0 - - -;
#X text 442 233 after this env~ values will pass;
#X obj 43 276 sel 0;
#X obj 66 309 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X floatatom 100 269 5 0 0 0 - - -;
#X obj 84 138 spigot 0;
#X msg 159 81 1;
#X msg 223 118 0;
#X floatatom 86 163 5 0 0 0 - - -;
#X floatatom 200 155 5 0 0 0 - - -;
#X obj 316 36 f;
#X obj 310 67 expr if($f1==0 \, 1 \, 0);
#X obj 310 93 sel 1;
#X obj 351 249 v sustain_prev_value;
#X text 291 217 this is for initing the prev value with decay last
value;
#X obj 49 338 s sustain_prev_value;
#X obj 18 232 expr if(($f1-$f3<= $f2) && ($f1+$f3>=$f2) \, $f1 \, 0)
\;;
#X obj 218 17 inlet;
#X obj 529 337 outlet;
#X text 518 316 bangs when finished;
#X connect 0 0 5 0;
#X connect 1 0 2 0;
#X connect 1 0 21 0;
#X connect 2 0 0 0;
#X connect 3 0 2 1;
#X connect 4 0 1 0;
#X connect 4 0 18 0;
#X connect 6 0 7 0;
#X connect 7 0 13 0;
#X connect 8 0 24 1;
#X connect 10 0 3 0;
#X connect 10 0 15 0;
#X connect 10 0 26 0;
#X connect 10 1 11 0;
#X connect 10 1 23 0;
#X connect 11 0 21 0;
#X connect 13 0 16 0;
#X connect 13 0 24 0;
#X connect 14 0 13 1;
#X connect 14 0 17 0;
#X connect 15 0 13 1;
#X connect 15 0 17 0;
#X connect 17 0 18 1;
#X connect 18 0 19 0;
#X connect 19 0 20 0;
#X connect 20 0 14 0;
#X connect 21 0 8 0;
#X connect 24 0 10 0;
#X connect 24 0 12 0;
#X connect 25 0 24 2;
#X restore 265 597 pd find_sustain;
#X text 409 524 last bang will do the job;
#X floatatom 379 621 5 0 0 0 - - -;
#X floatatom 295 444 5 0 0 0 - - -;
#X floatatom 304 538 5 0 0 0 - - -;
#X text 243 370 attack;
#X text 278 479 decay;
#X text 286 578 sustain;
#X text 647 407 release;
#X msg 460 146 0;
#X text 439 113 initialize values;
#X obj 36 189 expr $f1/44100;
#X floatatom 769 495 12 0 0 0 - - -;
#X obj 555 345 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 655 444 expr ($f2+$f3+$f4);
#X obj 244 684 expr $f1-$f2;
#X floatatom 252 790 10 0 0 0 - - -;
#X obj 695 563 / 1000;
#X obj 680 608 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 310 2 inlet;
#X obj 375 3 inlet;
#X obj 110 849 outlet;
#X obj 162 851 outlet;
#X obj 219 853 outlet;
#X obj 273 852 outlet;
#X text 107 871 attack decay sustain release;
#X obj 40 21 inlet;
#X obj 96 277 tabplay~ array2;
#N canvas 70 235 744 533 average_amplitude 0;
#X obj 86 23 inlet;
#X obj 102 254 int;
#X obj 172 255 +;
#X floatatom 102 288 5 0 0 0 - - -;
#X obj 85 196 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X msg 129 210 0;
#X text 117 88 this will be the env~;
#X text 128 188 this is the counter;
#X obj 74 154 moses;
#X obj 385 208 int;
#X floatatom 385 236 5 0 0 0 - - -;
#X obj 447 209 +;
#X msg 400 171 0;
#X floatatom 462 157 5 0 0 0 - - -;
#X text 442 235 sum of envelopes;
#X text 142 292 number of sumples;
#X obj 374 302 expr $f1 / $f2;
#X text 223 209 set to 1;
#X floatatom 42 65 5 0 0 0 - - -;
#X obj 202 229 r thresh_counter;
#X text 246 116 set to 58;
#X floatatom 134 138 5 0 0 0 - - -;
#X obj 134 112 r thresh_moses;
#X obj 374 343 outlet;
#X floatatom 417 326 5 0 0 0 - - -;
#X connect 0 0 8 0;
#X connect 0 0 13 0;
#X connect 0 0 18 0;
#X connect 1 0 2 0;
#X connect 1 0 3 0;
#X connect 2 0 1 1;
#X connect 3 0 16 1;
#X connect 4 0 1 0;
#X connect 4 0 9 0;
#X connect 5 0 1 1;
#X connect 8 0 5 0;
#X connect 8 0 12 0;
#X connect 8 1 4 0;
#X connect 9 0 10 0;
#X connect 9 0 11 0;
#X connect 10 0 16 0;
#X connect 11 0 9 1;
#X connect 12 0 9 1;
#X connect 13 0 11 1;
#X connect 16 0 23 0;
#X connect 16 0 24 0;
#X connect 19 0 2 1;
#X connect 21 0 8 1;
#X connect 22 0 21 0;
#X restore 59 549 pd average_amplitude;
#X obj 59 601 outlet;
#X floatatom 12 566 5 0 0 0 - - -;
#X text 34 623 average_amplitude;
#X obj 480 17 declare -path ./;
#X msg 41 85 read -resize extracted/\$1 array2;
#X obj 195 199 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 251 722 expr if($f1<0 \, 0 \, $f1 * 1000);
#X floatatom 76 388 5 0 0 0 - - -;
#X obj 300 153 timer;
#X obj 187 45 trigger b b b;
#X obj 651 759 outlet;
#X text 566 731 this sents a bang when we reach end of wav;
#X obj 784 649 delay;
#X floatatom 815 591 5 0 0 0 - - -;
#X obj 788 549 * 1000;
#X connect 1 0 28 0;
#X connect 1 0 57 0;
#X connect 2 0 3 0;
#X connect 2 0 30 0;
#X connect 4 0 34 0;
#X connect 4 0 62 0;
#X connect 6 0 7 1;
#X connect 7 0 5 0;
#X connect 7 0 5 1;
#X connect 8 0 14 0;
#X connect 8 0 18 1;
#X connect 9 0 10 0;
#X connect 10 0 33 1;
#X connect 10 0 40 0;
#X connect 11 0 9 1;
#X connect 12 0 8 0;
#X connect 12 0 11 0;
#X connect 12 0 17 0;
#X connect 13 0 16 0;
#X connect 13 1 19 2;
#X connect 15 0 18 0;
#X connect 15 0 13 0;
#X connect 15 0 19 0;
#X connect 15 0 47 0;
#X connect 15 0 55 0;
#X connect 16 0 33 2;
#X connect 16 0 41 0;
#X connect 17 0 13 2;
#X connect 18 0 12 0;
#X connect 19 0 21 0;
#X connect 19 1 32 0;
#X connect 21 0 33 3;
#X connect 21 0 42 0;
#X connect 22 0 13 1;
#X connect 23 0 19 1;
#X connect 28 0 8 0;
#X connect 30 0 4 0;
#X connect 31 0 36 0;
#X connect 32 0 33 0;
#X connect 33 0 31 0;
#X connect 34 0 54 0;
#X connect 35 0 43 0;
#X connect 36 0 34 1;
#X connect 36 0 37 0;
#X connect 37 0 34 0;
#X connect 38 0 1 0;
#X connect 39 0 23 0;
#X connect 45 0 57 0;
#X connect 45 0 52 0;
#X connect 46 0 7 0;
#X connect 46 0 15 0;
#X connect 47 0 49 0;
#X connect 47 0 48 0;
#X connect 52 0 2 0;
#X connect 53 0 46 0;
#X connect 53 0 60 0;
#X connect 54 0 35 0;
#X connect 57 0 53 0;
#X connect 57 1 9 0;
#X connect 57 2 56 0;
#X connect 60 0 58 0;
#X connect 61 0 60 1;
#X connect 62 0 61 0;
#X restore 790 346 pd audio_analyze;
#X floatatom 195 437 5 0 0 0 - - -;
#X floatatom 271 433 5 0 0 0 - - -;
#X text 168 456 current track num;
#X text 319 455 this is for the sustain;
#X obj 298 476 expr if($f1<0.9 \, 1 \, $f1);
#X floatatom 298 511 5 0 0 0 - - -;
#X obj 435 215 hsl 128 15 0 127 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 9500 1;
#X floatatom 389 228 5 0 0 0 - - -;
#X obj 432 172 r thresh_defeult;
#X obj 432 257 s defeult_threshold;
#X floatatom 322 411 5 0 0 0 - - -;
#X obj 63 394 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 322 389 r wav_size;
#X msg 118 279 bang;
#X msg 273 247 rewind;
#X obj 229 293 textfile;
#X symbolatom 138 312 10 0 0 0 - - -;
#X msg 113 243 read ./textfile.txt;
#X obj 322 329 print;
#X obj 262 356 symbol;
#X floatatom 65 422 5 0 0 0 - - -;
#X text 22 439 average amplitude;
#X obj 12 460 s average_amplitude;
#X obj 368 506 s sustain_thing;
#X obj 305 553 r sustain_thing;
#X obj 194 506 s wav_name;
#X obj 88 557 r wav_name;
#X obj 404 634 print PACKED;
#X msg 194 476 wav\$1.wav;
#X msg 215 691 1e+09;
#X msg 10 735 clear;
#X msg 845 122 bang;
#X msg 921 151 rewind;
#X obj 845 169 textfile;
#X obj 938 205 print list;
#X symbolatom 772 263 10 0 0 0 - - -;
#X floatatom 934 271 5 0 0 0 - - -;
#X obj 787 292 symbol;
#X floatatom 805 386 5 0 0 0 - - -;
#X floatatom 848 385 5 0 0 0 - - -;
#X floatatom 891 387 5 0 0 0 - - -;
#X floatatom 934 389 5 0 0 0 - - -;
#X text 794 415 attack;
#X text 845 415 decay;
#X text 891 417 sustain;
#X text 947 415 release;
#X obj 669 279 s wav_name2;
#X msg 885 565 1e+09;
#X obj 161 369 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X text 128 352 0->file/1->adc~;
#X text 17 393 s_div;
#X msg 605 632 clear;
#X obj 771 600 text insert ./characteristics.txt 6;
#X obj 689 672 text define -k ./characteristics.txt;
#A set;
#X msg 62 681 write ./sounds.txt;
#X msg 681 630 write ./characteristics.txt;
#X obj 235 375 r max_wavs;
#X floatatom 757 387 5 0 0 0 - - -;
#X text 733 414 avg_amp;
#X obj 214 589 pack s f;
#X obj 845 232 unpack s f;
#X msg 214 629 list \$1 \$2;
#X obj 130 28 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg 773 113 clear;
#X msg 34 288 clear;
#X obj 73 779 text define -k sounds.txt;
#A set wav18.wav 2.22977 \; wav19.wav 1 \; wav20.wav 1 \; wav21.wav
1 \; wav22.wav 1.32847 \; wav23.wav 1 \; wav24.wav 1.49614 \; wav25.wav
1 \; wav26.wav 1.10046 \; wav27.wav 1 \; wav28.wav 1 \; wav29.wav 1
\; wav30.wav 1 \; wav31.wav 1 \; wav32.wav 1 \; wav33.wav 1 \; wav34.wav
1 \; wav35.wav 1 \; wav36.wav 1.38595 \; wav37.wav 1 \; wav38.wav 1
\; wav39.wav 1.93404 \; wav40.wav 1.14457 \; wav41.wav 1 \; wav42.wav
1 \; wav43.wav 1 \; wav44.wav 1 \; wav45.wav 1 \; wav46.wav 1 \; wav47.wav
1 \; wav48.wav 1 \; wav49.wav 1 \; wav0.wav 1.98835 \; wav1.wav 1.458
\; wav2.wav 1 \; wav3.wav 1 \; wav4.wav 0.991621 \; wav5.wav 1 \; wav6.wav
1 \; wav7.wav 1 \; wav8.wav 1 \; wav9.wav 1 \; wav10.wav 1 \; wav11.wav
1 \;;
#X obj 133 737 text insert sounds.txt 3;
#X msg 690 153 read ./sounds.txt;
#X obj 710 453 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 775 504 pack f s f f f f f;
#X obj 965 454 r wav_name2;
#X msg 779 538 list \$2 \$3 \$4 \$5 \$6 \$7;
#X obj 299 131 spigot 0;
#X obj 302 163 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 302 95 t b;
#X obj 311 704 spigot 0;
#X obj 290 672 t b;
#X obj 498 586 r max_wavs;
#X obj 387 672 expr if($f1==$f2-1 \, 1 \, 0);
#X text 387 699 if max_wavs are recorded then audio record temporarily
stops;
#X text 390 715 When audio analyze finishes it restarts;
#N canvas 1124 157 450 300 counter 0;
#X obj 48 27 inlet;
#X obj 190 32 inlet;
#X text 13 1 add when bang;
#X text 164 2 reset when bang;
#X obj 57 106 f;
#X obj 115 103 + 1;
#X obj 748 404 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 748 404 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 758 414 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 51 206 outlet;
#X floatatom 86 149 5 0 0 0 - - -;
#X msg 170 65 0;
#X obj 242 48 loadbang;
#X connect 0 0 4 0;
#X connect 1 0 11 0;
#X connect 4 0 5 0;
#X connect 4 0 9 0;
#X connect 4 0 10 0;
#X connect 5 0 4 1;
#X connect 11 0 4 0;
#X connect 12 0 11 0;
#X restore 679 484 pd counter;
#X obj 745 455 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#N canvas 446 127 450 300 counter 0;
#X obj 48 27 inlet;
#X obj 190 32 inlet;
#X text 13 1 add when bang;
#X text 164 2 reset when bang;
#X obj 57 106 f;
#X obj 115 103 + 1;
#X obj 748 404 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 748 404 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 758 414 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 51 206 outlet;
#X floatatom 86 149 5 0 0 0 - - -;
#X msg 170 65 0;
#X obj 241 48 loadbang;
#X connect 0 0 4 0;
#X connect 1 0 11 0;
#X connect 4 0 5 0;
#X connect 4 0 9 0;
#X connect 4 0 10 0;
#X connect 5 0 4 1;
#X connect 11 0 4 0;
#X connect 12 0 11 0;
#X restore 111 505 pd counter;
#X floatatom 49 500 5 0 0 0 - - -;
#X obj 607 588 spigot 0;
#X obj 147 479 t b;
#X obj 595 536 expr if($f1==$f2 \, 1 \, 0);
#X obj 595 563 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X floatatom 709 582 5 0 0 0 - - -;
#X floatatom 609 499 5 0 0 0 - - -;
#X floatatom 566 434 5 0 0 0 - - -;
#X obj 662 227 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 613 448 r max_wavs;
#X obj 561 370 text size sounds.txt;
#X obj 411 48 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 411 84 t b b b b b;
#X obj 190 11 inlet;
#X obj 265 12 inlet;
#X obj 337 11 inlet;
#X obj 626 11 inlet;
#X obj 411 11 inlet;
#X text 913 293 sustain thresh between samples;
#X obj 34 343 loadbang;
#X msg 94 360 0;
#X obj 626 55 t b b b;
#X text 668 10 record from files;
#X text 418 29 record from microphone;
#X msg 66 66 \; pd dsp \$1 \; thresh_moses 1 \; thresh_counter 1 \;
wav_size 10 \; max_wavs 50 \; thresh_defeult 95 \;;
#X connect 0 0 23 0;
#X connect 0 0 25 0;
#X connect 0 1 16 0;
#X connect 0 2 3 0;
#X connect 0 3 4 0;
#X connect 2 0 60 0;
#X connect 2 1 41 0;
#X connect 2 2 42 0;
#X connect 2 3 43 0;
#X connect 2 4 44 0;
#X connect 2 5 71 0;
#X connect 3 0 31 0;
#X connect 4 0 7 0;
#X connect 7 0 8 0;
#X connect 7 0 26 0;
#X connect 9 0 10 0;
#X connect 9 0 12 0;
#X connect 11 0 9 0;
#X connect 14 0 0 2;
#X connect 15 0 13 0;
#X connect 15 0 0 0;
#X connect 16 0 18 0;
#X connect 17 0 18 0;
#X connect 18 0 21 0;
#X connect 18 0 22 0;
#X connect 20 0 18 0;
#X connect 22 0 19 0;
#X connect 22 0 0 4;
#X connect 27 0 62 1;
#X connect 29 0 62 0;
#X connect 31 0 28 0;
#X connect 31 0 89 0;
#X connect 32 0 69 1;
#X connect 33 0 68 0;
#X connect 34 0 36 0;
#X connect 35 0 36 0;
#X connect 36 0 37 0;
#X connect 36 0 63 0;
#X connect 38 0 40 0;
#X connect 38 0 49 0;
#X connect 40 0 2 0;
#X connect 41 0 72 3;
#X connect 42 0 72 4;
#X connect 43 0 72 5;
#X connect 44 0 72 6;
#X connect 50 0 55 1;
#X connect 51 0 0 1;
#X connect 54 0 56 0;
#X connect 57 0 68 0;
#X connect 58 0 56 0;
#X connect 59 0 0 3;
#X connect 60 0 72 2;
#X connect 62 0 64 0;
#X connect 63 0 38 0;
#X connect 63 0 2 1;
#X connect 63 1 2 2;
#X connect 63 1 39 0;
#X connect 64 0 30 0;
#X connect 64 0 32 0;
#X connect 64 0 69 0;
#X connect 64 0 79 0;
#X connect 65 0 111 0;
#X connect 65 0 75 1;
#X connect 65 0 77 0;
#X connect 66 0 36 0;
#X connect 67 0 18 0;
#X connect 70 0 36 0;
#X connect 70 0 95 0;
#X connect 71 0 72 0;
#X connect 71 0 58 0;
#X connect 71 0 34 0;
#X connect 71 0 84 0;
#X connect 72 0 74 0;
#X connect 73 0 72 1;
#X connect 74 0 50 0;
#X connect 74 0 55 0;
#X connect 75 0 76 0;
#X connect 76 0 67 0;
#X connect 76 0 33 0;
#X connect 76 0 66 0;
#X connect 76 0 54 0;
#X connect 77 0 75 0;
#X connect 78 0 98 0;
#X connect 79 0 78 0;
#X connect 80 0 81 1;
#X connect 81 0 78 1;
#X connect 84 0 90 0;
#X connect 85 0 84 1;
#X connect 86 0 87 0;
#X connect 86 0 81 0;
#X connect 88 0 85 0;
#X connect 88 0 86 1;
#X connect 88 0 76 0;
#X connect 88 0 51 0;
#X connect 89 0 86 0;
#X connect 90 0 88 1;
#X connect 90 0 91 0;
#X connect 90 0 92 0;
#X connect 91 0 88 0;
#X connect 95 0 97 0;
#X connect 96 0 93 0;
#X connect 97 0 94 0;
#X connect 97 0 90 1;
#X connect 98 0 99 0;
#X connect 99 0 34 0;
#X connect 99 0 51 0;
#X connect 99 1 35 0;
#X connect 99 2 70 0;
#X connect 99 3 57 0;
#X connect 100 0 65 0;
#X connect 101 0 51 0;
#X connect 102 0 14 0;
#X connect 103 0 108 0;
#X connect 104 0 98 0;
#X connect 106 0 107 0;
#X connect 107 0 51 0;
#X connect 108 0 16 0;
#X connect 108 1 17 0;
#X connect 108 2 20 0;
